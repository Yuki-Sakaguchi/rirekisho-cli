# Resume CLI プロジェクト要件定義書

## 1. プロジェクト概要

### 1.1 背景・目的
- **背景**: エンジニアの転職活動において履歴書作成が毎回煩雑で時間がかかる
- **課題**: 学歴・職歴・資格等の情報管理、履歴書フォーマットの準備、印刷対応等
- **目的**: YAML設定ファイルから日本の標準的な履歴書PDFを自動生成するCLIツールの開発

### 1.2 ターゲットユーザー
- **主要ターゲット**: 転職活動を行うエンジニア
- **技術レベル**: Git、YAML、CLI操作に慣れ親しんだユーザー
- **利用シーン**: 転職活動、GitHub privateリポジトリでの履歴書管理

### 1.3 プロダクトの価値提案
- **再利用性**: 一度作成すれば何度でも履歴書生成可能
- **バージョン管理**: GitHubでの履歴書情報の変更履歴管理
- **プライバシー**: 個人情報をprivateリポジトリで安全管理
- **効率性**: コマンド一発での履歴書PDF生成

## 2. 機能要件

### 2.1 Core機能（MVP）

#### 2.1.1 履歴書生成機能
- **入力**: YAML設定ファイル
- **出力**: 日本の標準的な履歴書PDF（A4サイズ、2ページ構成）
- **コマンド**: `resume generate <yaml-file> [-o output.pdf]`

#### 2.1.2 対応する履歴書フォーマット
- **採用フォーマット**: 一般的な履歴書様式（転職者向け）
- **特徴**: 
  - 職歴欄を充実（転職者に最適化）
  - 志望動機・自己PR欄を強調
  - エンジニア向けスキル記載に対応
- **サイズ**: A4サイズ（A3二つ折り）固定

#### 2.1.3 履歴書レイアウト構成

**Page 1: 基本情報・学歴職歴**
- タイトル「履歴書」（中央配置、文字間隔広め）
- 作成日（右上表示）
- 個人情報テーブル
  - ふりがな・氏名
  - 生年月日・年齢・性別
  - 写真貼付位置（注意書き付き）
  - 連絡先（携帯電話、Email、固定電話、FAX）
  - 住所（ふりがな、郵便番号自動抽出）
- 学歴・職歴テーブル
  - 表形式（年・月・内容の3列）
  - 「学歴」「職歴」ラベル
  - 「以上」で終了

**Page 2: 資格・その他情報**
- 免許・資格テーブル（表形式）
- 通勤時間・扶養家族・配偶者情報
- 趣味・特技欄
- 志望動機欄（大きく確保）
- 本人希望記入欄

### 2.2 データスキーマ（YAML構造）

#### 2.2.1 個人情報 (personal_info)
```yaml
personal_info:
  name:
    kanji: "田中 太郎"          # 漢字氏名（必須）
    furigana: "たなか たろう"   # ふりがな（必須）
  birth_date: "1990-04-15"      # 生年月日 YYYY-MM-DD（必須）
  age: 34                       # 年齢（任意、自動計算可能）
  gender: "男"                  # 性別（任意）
  address: "〒123-4567 東京都..."  # 住所（必須、郵便番号自動抽出）
  phone: "090-1234-5678"        # 携帯電話（必須）
  email: "tanaka@example.com"   # Email（必須）
  landline: "03-1234-5678"      # 固定電話（任意）
  fax: "03-1234-5679"           # FAX（任意）
```

#### 2.2.2 学歴 (education)
```yaml
education:
  - date: "2009-04"             # 年月
    type: "入学"                # 入学・卒業・修了・中退
    institution: "○○大学工学部"   # 機関名
```

#### 2.2.3 職歴 (work_experience)
```yaml
work_experience:
  - date: "2013-04"             # 年月
    type: "入社"                # 入社・退職・在職中
    company: "株式会社○○"       # 会社名
    detail: "開発業務"           # 詳細（任意）
```

#### 2.2.4 資格 (certifications)
```yaml
certifications:
  - date: "2015-05"             # 取得年月
    name: "基本情報技術者試験 合格"  # 資格名
```

#### 2.2.5 追加情報 (additional_info)
```yaml
additional_info:
  skills: "プログラミング言語..."     # 趣味・特技
  motivation: "貴社の..."           # 志望動機
  other: "特にありません"           # 本人希望記入欄
  commute_time: "45分"             # 通勤時間
  family_dependents: 0             # 扶養家族数
  spouse: false                    # 配偶者有無
  spouse_support: false            # 配偶者扶養義務
```

### 2.3 Phase 2以降の拡張機能

#### 2.3.1 写真対応機能
- 写真ファイル読み込み・配置
- 画像リサイズ・トリミング自動調整
- 対応形式: JPG, PNG, GIF

#### 2.3.2 追加CLIコマンド
- `resume init`: サンプルYAMLファイル生成
- `resume validate`: YAML事前検証
- プログレスバー・カラー出力

#### 2.3.3 高度な機能
- 複数履歴書テンプレート対応
- 企業別カスタマイズ機能
- PDF暗号化・透かし機能

## 3. 非機能要件

### 3.1 技術要件

#### 3.1.1 開発技術スタック
- **言語**: TypeScript
- **ランタイム**: Node.js (v18以上)
- **主要ライブラリ**:
  - PDF生成: PDFKit
  - CLI: Commander.js
  - YAML処理: js-yaml
  - バリデーション: Zod

#### 3.1.2 出力仕様
- **形式**: PDF形式のみ
- **サイズ**: A4（595.28 x 841.89 points）
- **ページ数**: 2ページ固定
- **フォント**: 日本語対応（システムフォント使用）
- **文字エンコーディング**: UTF-8

#### 3.1.3 互換性
- **OS**: Windows, macOS, Linux
- **Node.js**: v18.0.0以上
- **配布**: npm package（グローバルインストール対応）

### 3.2 パフォーマンス要件
- **生成時間**: 通常の履歴書で3秒以内
- **ファイルサイズ**: 生成PDF 100KB以下（写真なし）
- **メモリ使用量**: 50MB以下

### 3.3 信頼性要件
- **エラーハンドリング**: 適切なエラーメッセージ表示
- **入力検証**: YAML形式・必須項目の事前チェック
- **出力品質**: 印刷可能な高品質PDF生成

### 3.4 セキュリティ要件
- **個人情報保護**: ローカル処理、外部サーバー送信なし
- **ファイル権限**: 生成PDFの適切な権限設定
- **データ保存**: 個人情報をGitHub privateリポジトリで管理

## 4. システム設計方針

### 4.1 アーキテクチャ
```
src/
├── cli/              # CLI関連
├── core/             # 核となるロジック
├── schemas/          # YAMLスキーマ定義
├── templates/        # 履歴書テンプレート
└── utils/            # ユーティリティ
```

### 4.2 モジュール設計
- **validator**: YAML検証・カスタムバリデーション
- **pdf-generator**: PDF生成エンジン
- **template-engine**: 履歴書レイアウト制御
- **cli-commands**: コマンドライン処理

### 4.3 データフロー
1. YAML読み込み → 2. スキーマ検証 → 3. データ変換 → 4. PDF生成 → 5. ファイル出力

## 5. 開発・運用要件

### 5.1 開発環境
- **ES Module**: 完全対応
- **TypeScript**: 厳密な型定義
- **テスト**: Jest による単体・統合テスト
- **リント**: ESLint による品質管理

### 5.2 テスト戦略
- **単体テスト**: バリデーション、PDF生成ロジック
- **統合テスト**: YAML→PDF全体フロー
- **E2Eテスト**: CLIコマンド実行
- **カバレッジ**: 70%以上

### 5.3 配布・インストール
```bash
# グローバルインストール
npm install -g resume-cli

# 使用方法
resume generate my-resume.yaml
```

### 5.4 ドキュメント
- README.md（使用方法・インストール手順）
- サンプルYAMLファイル
- トラブルシューティングガイド

## 6. 制約事項・前提条件

### 6.1 技術制約
- Node.js環境必須
- 日本語フォント対応OSでの動作
- インターネット接続不要（完全ローカル処理）

### 6.2 機能制約
- 履歴書フォーマットは1種類のみ（MVP）
- 写真機能はPhase 2対応
- Word/Excel出力は対象外

### 6.3 運用制約
- 個人使用想定（商用利用は別途検討）
- サポートはGitHub Issues
- 更新頻度は月1回程度

## 7. 成功指標・検収基準

### 7.1 MVP完成基準
- [ ] YAML→PDF生成が正常動作
- [ ] 日本語表示に文字化けなし
- [ ] 実際の履歴書フォーマットに準拠
- [ ] 全テストケースパス
- [ ] 企業提出可能な品質のPDF生成

### 7.2 品質基準
- [ ] TypeScript型エラーゼロ
- [ ] ESLintエラーゼロ
- [ ] テストカバレッジ70%以上
- [ ] 印刷時の レイアウト崩れなし

### 7.3 ユーザビリティ基準
- [ ] 初回セットアップが10分以内
- [ ] エラーメッセージが分かりやすい
- [ ] サンプルYAMLで即座に動作確認可能
- [ ] 生成されたPDFが企業に提出可能な品質

この要件定義書により、エンジニア向けの実用的な履歴書生成CLIツールの全体像が明確化されました。